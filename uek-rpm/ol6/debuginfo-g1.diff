--- find-debuginfo.sh.orig	2012-09-11 14:16:20.726096651 +0100
+++ find-debuginfo.sh	2012-09-11 14:18:47.733495661 +0100
@@ -2,12 +2,14 @@
 #find-debuginfo.sh - automagically generate debug info and file list
 #for inclusion in an rpm spec file.
 #
-# Usage: find-debuginfo.sh [--strict-build-id] [-g]
+# Usage: find-debuginfo.sh [--strict-build-id] [-g|-g1]
 #	 		   [-o debugfiles.list]
 #			   [[-l filelist]... [-p 'pattern'] -o debuginfo.list]
 #			   [builddir]
 #
 # The -g flag says to use strip -g instead of full strip on DSOs.
+# The -g1 flag says to use strip -g instead of full strip on
+# everything, DSO or not.
 # The --strict-build-id flag says to exit with failure status if
 # any ELF binary processed fails to contain a build-id note.
 #
@@ -36,6 +38,9 @@
   --strict-build-id)
     strict=true
     ;;
+  -g1)
+    strip_g=full
+    ;;
   -g)
     strip_g=true
     ;;
@@ -89,8 +94,11 @@
 strip_to_debug()
 {
   local g=
-  $strip_g && case "$(file -bi "$2")" in
-  application/x-sharedlib*) g=-g ;;
+  case "$strip_g" in
+    true) case "$(file -bi "$2")" in
+            application/x-sharedlib*) g=-g ;;
+          esac;;
+    full) g=-g;;
   esac
   eu-strip --remove-comment $g -f "$1" "$2" || exit
   chmod 444 "$1" || exit
